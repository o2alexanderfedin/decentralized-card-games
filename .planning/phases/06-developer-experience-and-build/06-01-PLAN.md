---
phase: 06-developer-experience-and-build
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - eslint.config.js
  - vitest.config.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "Running `npm run lint` checks all src/**/*.{ts,tsx} files with ESLint"
    - "ESLint reports jsx-a11y violations alongside TypeScript errors"
    - "Running `npm run test:coverage` produces coverage report with >80% thresholds enforced"
  artifacts:
    - path: "eslint.config.js"
      provides: "ESLint 9 flat config with TypeScript, React, React Hooks, and jsx-a11y rules"
      contains: "jsxA11y.flatConfigs.recommended"
    - path: "vitest.config.ts"
      provides: "Coverage configuration with v8 provider and thresholds"
      contains: "coverage"
    - path: "package.json"
      provides: "lint, lint:fix, and test:coverage scripts"
      contains: "lint"
  key_links:
    - from: "eslint.config.js"
      to: "src/**/*.{ts,tsx}"
      via: "ESLint file matching"
      pattern: "files.*src"
    - from: "vitest.config.ts"
      to: "@vitest/coverage-v8"
      via: "coverage provider"
      pattern: "provider.*v8"
---

<objective>
Set up ESLint 9 flat config with TypeScript and accessibility rules, and configure Vitest coverage with v8 provider and >80% threshold enforcement.

Purpose: Establish code quality tooling (BUILD-04, BUILD-05) that catches bugs and accessibility issues at author time, and ensures the test suite maintains adequate coverage.
Output: eslint.config.js, updated vitest.config.ts, package.json scripts for lint and coverage.
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-developer-experience-and-build/06-RESEARCH.md
@vitest.config.ts
@package.json
@tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install ESLint ecosystem and create flat config</name>
  <files>eslint.config.js, package.json</files>
  <action>
Install ESLint 9 and plugins:
```bash
npm install -D eslint @eslint/js typescript-eslint eslint-plugin-react eslint-plugin-react-hooks eslint-plugin-jsx-a11y globals
```

Create `eslint.config.js` (ESM format) with:
- `js.configs.recommended` as base
- `...tseslint.configs.recommended` for TypeScript
- `jsxA11y.flatConfigs.recommended` for accessibility
- Files scope: `src/**/*.{ts,tsx}`
- React plugin with `react-in-jsx-scope: off`, `prop-types: off`
- React Hooks plugin with `rules-of-hooks: error`, `exhaustive-deps: warn`
- `@typescript-eslint/no-unused-vars` set to warn with `argsIgnorePattern: '^_'` and `varsIgnorePattern: '^_'`
- React settings: `{ react: { version: 'detect' } }`
- Ignores: `dist/**`, `storybook-static/**`, `*.config.*`, `node_modules/**`

Add to package.json scripts:
- `"lint": "eslint src/"` (replace existing `"lint": "tsc --noEmit"`)
- `"lint:fix": "eslint src/ --fix"`

Keep existing `"typecheck": "tsc --noEmit"` script for type-only checking.

Reference 06-RESEARCH.md Pattern 3 for exact config structure. Use `eslint-plugin-react-hooks` version ^5.1 which supports flat config natively.
  </action>
  <verify>Run `npm run lint` - it should complete (may report warnings but no crashes). Verify the config loads correctly.</verify>
  <done>ESLint 9 flat config exists with TypeScript + React + React Hooks + jsx-a11y rules. `npm run lint` executes successfully.</done>
</task>

<task type="auto">
  <name>Task 2: Install coverage provider and configure thresholds</name>
  <files>vitest.config.ts, package.json</files>
  <action>
Install coverage provider matching Vitest 3.x:
```bash
npm install -D @vitest/coverage-v8
```

IMPORTANT: Install `@vitest/coverage-v8@^3.0` (NOT 4.x) to match existing `vitest@^3.0`.

Update `vitest.config.ts` to add coverage configuration:
```typescript
coverage: {
  provider: 'v8',
  reporter: ['text', 'json', 'html', 'lcov'],
  include: ['src/**/*.{ts,tsx}'],
  exclude: [
    'src/**/*.test.{ts,tsx}',
    'src/**/*.stories.{ts,tsx}',
    'src/**/index.ts',        // barrel files
    'src/test-setup.ts',
    'src/css-modules.d.ts',
  ],
  thresholds: {
    lines: 80,
    functions: 80,
    branches: 80,
    statements: 80,
  },
},
```

Add to package.json scripts:
- `"test:coverage": "vitest run --coverage"`

Keep existing `"test": "vitest run"` and `"test:watch": "vitest"` scripts unchanged.
  </action>
  <verify>Run `npm run test:coverage` - should run all tests and produce coverage report. Verify thresholds are enforced (build fails if coverage drops below 80%).</verify>
  <done>Coverage runs with v8 provider, produces text + HTML + lcov reports, and enforces >80% thresholds on lines/functions/branches/statements.</done>
</task>

</tasks>

<verification>
1. `npm run lint` executes ESLint flat config without crashes
2. `npm run test:coverage` produces coverage report with threshold enforcement
3. `eslint.config.js` includes jsx-a11y recommended rules
4. Coverage excludes test files, stories, barrel files, and setup files
</verification>

<success_criteria>
- ESLint 9 flat config with TypeScript, React, React Hooks, and jsx-a11y rules is functional
- Vitest coverage with v8 provider enforces >80% on lines/functions/branches/statements
- `npm run lint`, `npm run lint:fix`, and `npm run test:coverage` scripts work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/06-developer-experience-and-build/06-01-SUMMARY.md`
</output>
