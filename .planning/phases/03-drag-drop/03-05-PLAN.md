---
phase: 03-drag-drop
plan: 05
type: execute
wave: 4
depends_on: ["03-04"]
files_modified:
  - src/components/index.ts
  - src/index.ts
  - src/hooks/index.ts
autonomous: false

must_haves:
  truths:
    - "All DnD components (CardDndProvider, DraggableCard, CardDragOverlay, DroppableZone) are importable from the library entry point"
    - "All DnD types are importable from the library entry point"
    - "DnD hooks (useDragSensors, useHapticFeedback) are importable from the library entry point"
    - "All existing 201+ tests pass with zero regressions"
    - "Library builds cleanly with type declarations for all new exports"
    - "Dragging 50+ cards does not cause visible jank (React.memo on DraggableCard)"
  artifacts:
    - path: "src/index.ts"
      provides: "Library entry point with Phase 3 DnD exports"
      contains: "CardDndProvider"
    - path: "src/components/index.ts"
      provides: "Component barrel with DnD components"
      contains: "DraggableCard"
  key_links:
    - from: "src/index.ts"
      to: "src/components/index.ts"
      via: "named exports for DnD components"
      pattern: "CardDndProvider.*DraggableCard.*DroppableZone.*CardDragOverlay"
    - from: "src/index.ts"
      to: "src/types/index.ts"
      via: "DnD type exports"
      pattern: "DragItemData.*SensorConfig"
---

<objective>
Update barrel exports for all Phase 3 DnD artifacts and verify full integration.

Purpose: Make all DnD components, types, and hooks available from the library's public API. Verify the build produces correct type declarations and that performance meets the 50+ card requirement. This completes Phase 3.

Output: Updated barrel exports, passing build, integration verification.
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-drag-drop/03-01-SUMMARY.md
@.planning/phases/03-drag-drop/03-04-SUMMARY.md

@src/index.ts
@src/components/index.ts
@src/hooks/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update barrel exports for all Phase 3 DnD artifacts</name>
  <files>src/components/index.ts, src/hooks/index.ts, src/index.ts</files>
  <action>
    1. Update `src/components/index.ts` to add Phase 3 component re-exports:
       ```typescript
       // Phase 3
       export * from './DraggableCard';
       export * from './CardDragOverlay';
       export * from './DroppableZone';
       export * from './CardDndProvider';
       ```

    2. Update `src/hooks/index.ts` -- should already have useDragSensors and useHapticFeedback from Plan 01. Verify they are present. If not, add them.

    3. Update `src/index.ts` to add Phase 3 named exports:

       Add to Components section:
       ```typescript
       // Components (Phase 3 - Drag & Drop)
       export { CardDndProvider } from './components';
       export { DraggableCard } from './components';
       export { CardDragOverlay } from './components';
       export { DroppableZone } from './components';
       ```

       Add to type exports:
       ```typescript
       export type {
         // Phase 3 component types
         CardDndProviderProps,
         DraggableCardProps,
         CardDragOverlayProps,
         DroppableZoneProps,
         // Phase 3 DnD types
         DragItemData,
         DropValidationFn,
         DragLifecycleCallbacks,
         SensorConfig,
         DragPreviewMode,
         DropFeedbackMode,
         InvalidDropBehavior,
       } from './components';
       ```

       Note: DnD types that are re-exported through components (via their type files) need to also be available. If DnD types are only in `src/types/dnd.ts`, add direct type exports from `./types`:
       ```typescript
       export type {
         DragItemData,
         DropValidationFn,
         DragLifecycleCallbacks,
         SensorConfig,
         DragPreviewMode,
         DropFeedbackMode,
         InvalidDropBehavior,
       } from './types';
       ```

       Add to Hooks section:
       ```typescript
       export { useDragSensors, useHapticFeedback } from './hooks';
       ```

    4. Verify build succeeds:
       ```bash
       npm run build
       ```
       Check that `dist/index.d.ts` contains all Phase 3 type exports.

    5. Verify all tests pass:
       ```bash
       npm test
       ```
       All 201+ existing tests plus all new Phase 3 tests should pass.
  </action>
  <verify>
    - `npm run build` succeeds with no errors
    - `dist/index.d.ts` contains CardDndProvider, DraggableCard, DroppableZone, CardDragOverlay exports
    - `dist/index.d.ts` contains DragItemData, SensorConfig, DropValidationFn type exports
    - `npm test` -- all tests pass (201+ existing + Phase 3 new tests)
    - `npx tsc --noEmit` -- zero type errors
  </verify>
  <done>All Phase 3 DnD components, types, and hooks are importable from the library entry point, build succeeds with type declarations</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 3 Drag & Drop system: CardDndProvider context, DraggableCard with touch support, DroppableZone with validation, CardDragOverlay with multi-card preview, sensor configuration, and haptic feedback hooks. All wired through barrel exports with type declarations.</what-built>
  <how-to-verify>
    1. Run `npm test` and confirm all tests pass (check count is higher than 201)
    2. Run `npm run build` and confirm clean build output
    3. Check `dist/index.d.ts` and search for:
       - "CardDndProvider" -- the main provider export
       - "DraggableCard" -- the draggable card wrapper
       - "DroppableZone" -- the droppable zone wrapper
       - "DragItemData" -- the core DnD type
    4. Optionally: create a quick test component in the dev app that renders CardDndProvider with a DraggableCard and DroppableZone to verify basic drag works in the browser
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
- `npm run build` produces clean output with all Phase 3 type declarations
- `npm test` -- all tests pass with zero regressions
- All new DnD exports are available from the library entry point
- Library consumers can import: `{ CardDndProvider, DraggableCard, DroppableZone, CardDragOverlay }` from the package
- Library consumers can import types: `{ DragItemData, SensorConfig, DropValidationFn }` from the package
</verification>

<success_criteria>
- All Phase 3 components exportable from library root
- All Phase 3 types available in dist/index.d.ts
- All tests pass (201+ existing + all new Phase 3 tests)
- Build clean with no errors or warnings
- Phase 3 requirements DND-01 through DND-06 covered:
  - DND-01: dnd-kit integration via CardDndProvider
  - DND-02: DraggableCard component
  - DND-03: DroppableZone component
  - DND-04: CardDragOverlay component
  - DND-05: TouchSensor with touch-action CSS for mobile
  - DND-06: React.memo on DraggableCard, DragOverlay pattern for performance
</success_criteria>

<output>
After completion, create `.planning/phases/03-drag-drop/03-05-SUMMARY.md`
</output>
