---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/Card/CardFace.tsx
  - src/components/Card/CardBack.tsx
  - src/components/Card/Card.module.css
  - src/components/Card/Card.types.ts
autonomous: true

must_haves:
  truths:
    - "CardFace displays correct suit emoji and rank for any card"
    - "CardBack renders customizable card back design"
    - "Cards maintain correct aspect ratio (poker or bridge)"
    - "Material design shadows and flat styling are applied"
  artifacts:
    - path: "src/components/Card/CardFace.tsx"
      provides: "Front face rendering with suit and rank"
      exports: ["CardFace"]
      min_lines: 50
    - path: "src/components/Card/CardBack.tsx"
      provides: "Back face rendering with customization"
      exports: ["CardBack"]
      min_lines: 30
    - path: "src/components/Card/Card.module.css"
      provides: "Card styling with CSS custom properties"
      contains: "aspect-ratio"
    - path: "src/components/Card/Card.types.ts"
      provides: "Component prop types"
      exports: ["CardProps", "CardRef"]
  key_links:
    - from: "src/components/Card/CardFace.tsx"
      to: "src/types/card.ts"
      via: "CardData type import"
      pattern: "import.*CardData.*from"
    - from: "src/components/Card/CardFace.tsx"
      to: "src/constants/suits.ts"
      via: "SUIT_EMOJI and colors import"
      pattern: "import.*SUIT_EMOJI.*from"
---

<objective>
Create the visual presentation components for card faces (front and back).

Purpose: Build the pure rendering components that display card identity and card backs. These are presentation-only components that the main Card component will wrap with flip animation logic.

Output:
- CardFace component displaying suit emoji and rank
- CardBack component with customizable design
- CSS module with material design styling
- TypeScript types for all card component props
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/01-foundation---core-rendering/01-CONTEXT.md
@.planning/phases/01-foundation---core-rendering/01-RESEARCH.md
@.planning/phases/01-foundation---core-rendering/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Card types and CSS styles</name>
  <files>src/components/Card/Card.types.ts, src/components/Card/Card.module.css</files>
  <action>
Create component types in src/components/Card/Card.types.ts:

```typescript
import { ReactNode } from 'react';
import { CardData, Suit, Rank } from '../../types';

export type ColorScheme = 'two-color' | 'four-color';
export type AspectRatio = 'poker' | 'bridge';
export type Perspective = 'subtle' | 'moderate' | 'dramatic';
export type SpringPreset = 'default' | 'bouncy' | 'stiff';

export interface CardClickData extends CardData {
  isFaceUp: boolean;
}

export interface CardProps {
  /** Card identity in notation format (e.g., "♠A") or CardData object */
  card: string | CardData;

  /** Controlled mode: explicitly set face-up state */
  isFaceUp?: boolean;

  /** Color scheme for suits */
  colorScheme?: ColorScheme;

  /** Card aspect ratio */
  aspectRatio?: AspectRatio;

  /** 3D perspective depth */
  perspective?: Perspective;

  /** Spring animation preset or custom config */
  spring?: SpringPreset | { stiffness: number; damping: number };

  /** Custom card back content */
  cardBack?: ReactNode;

  /** Called when card is clicked/tapped */
  onClick?: (data: CardClickData) => void;

  /** Called when flip animation starts */
  onFlipStart?: () => void;

  /** Called when flip animation completes */
  onFlipComplete?: () => void;

  /** Called on hover state change */
  onHover?: (isHovered: boolean) => void;

  /** Called on focus state change */
  onFocus?: (isFocused: boolean) => void;

  /** Additional CSS class */
  className?: string;
}

export interface CardRef {
  /** Flip the card (uncontrolled mode only) */
  flip: () => void;
  /** Get current face-up state */
  isFaceUp: () => boolean;
}
```

Create CSS module in src/components/Card/Card.module.css:

```css
/* Card container - applies perspective */
.container {
  /* CSS custom properties for theming */
  --card-perspective: 1000px;
  --card-border-radius: 8px;
  --card-padding: 0.5em;
  --card-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  --card-shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.3);

  perspective: var(--card-perspective);
  width: 100%;
  height: 100%;
}

/* Card wrapper - maintains 3D context and aspect ratio */
.card {
  position: relative;
  width: 100%;
  aspect-ratio: 5 / 7; /* Poker default */
  transform-style: preserve-3d;
  cursor: pointer;
}

.card--bridge {
  aspect-ratio: 9 / 14;
}

/* Face base styles (shared by front and back) */
.face {
  position: absolute;
  inset: 0;
  border-radius: var(--card-border-radius);
  box-shadow: var(--card-shadow);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  /* Safari fix */
  transform: translate3d(0, 0, 0);
}

.face:hover {
  box-shadow: var(--card-shadow-hover);
}

/* Front face */
.front {
  background: white;
  display: flex;
  flex-direction: column;
  padding: var(--card-padding);
}

/* Back face - pre-rotated 180deg */
.back {
  background: linear-gradient(135deg, #1a365d 0%, #2d4a7c 100%);
  transform: rotateY(180deg);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Card content layout */
.corner {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1;
}

.corner--top {
  align-self: flex-start;
}

.corner--bottom {
  align-self: flex-end;
  transform: rotate(180deg);
  margin-top: auto;
}

.rank {
  font-size: 1.5em;
  font-weight: bold;
  font-family: 'Georgia', serif;
}

.suit {
  font-size: 1.2em;
}

.center {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3em;
}

/* Color scheme classes */
.suit--red { color: #cc0000; }
.suit--black { color: #000000; }
.suit--blue { color: #0066cc; }
.suit--green { color: #009933; }

/* Perspective variants */
.container--subtle { --card-perspective: 2000px; }
.container--moderate { --card-perspective: 1000px; }
.container--dramatic { --card-perspective: 600px; }

/* Default card back pattern */
.backPattern {
  width: 80%;
  height: 80%;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 5px,
    rgba(255, 255, 255, 0.1) 5px,
    rgba(255, 255, 255, 0.1) 10px
  );
}
```

IMPORTANT: Use em/rem units for font sizes so they scale with card size. Use CSS custom properties for theming.
  </action>
  <verify>
- TypeScript compiles without errors
- CSS classes use BEM-like naming convention
- Aspect ratios are correct (5:7 for poker, 9:14 for bridge)
- CSS custom properties allow theming
  </verify>
  <done>
- CardProps includes all props from CONTEXT.md decisions
- CardRef provides imperative API for uncontrolled mode
- CSS module provides material design styling
- Aspect ratios match poker (2.5:3.5) and bridge (2.25:3.5) sizes
  </done>
</task>

<task type="auto">
  <name>Task 2: Create CardFace component</name>
  <files>src/components/Card/CardFace.tsx</files>
  <action>
Create card front face component in src/components/Card/CardFace.tsx:

```typescript
import { CardData, parseCard } from '../../types';
import { SUIT_EMOJI, SUIT_COLORS_TWO, SUIT_COLORS_FOUR } from '../../constants';
import type { ColorScheme } from './Card.types';
import styles from './Card.module.css';

interface CardFaceProps {
  /** Card data or notation string */
  card: string | CardData;
  /** Color scheme for suit colors */
  colorScheme?: ColorScheme;
  /** Additional class name */
  className?: string;
}

export function CardFace({ card, colorScheme = 'two-color', className }: CardFaceProps) {
  // Implementation...
}
```

Implementation requirements:
1. Parse card if string notation, use directly if CardData
2. Display rank and suit emoji in top-left and bottom-right corners
3. Display large suit emoji in center
4. Apply color based on colorScheme (two-color or four-color)
5. Handle invalid card gracefully (show placeholder or error state)

Card layout:
```
+-------+
| A     |
| ♠     |
|       |
|   ♠   |
|       |
|     ♠ |
|     A |
+-------+
```

Use CSS module classes for styling. Ensure rank and suit text scale with container size using em units.
  </action>
  <verify>
- CardFace("♠A") displays Ace of Spades correctly
- CardFace("♥K") displays King of Hearts in red
- Four-color scheme shows diamonds in blue, clubs in green
- Layout matches standard playing card design
  </verify>
  <done>
- CardFace renders any of 52 cards correctly
- Suit colors match selected color scheme
- Text scales proportionally with card size
- Invalid cards show graceful fallback
  </done>
</task>

<task type="auto">
  <name>Task 3: Create CardBack component</name>
  <files>src/components/Card/CardBack.tsx</files>
  <action>
Create card back component in src/components/Card/CardBack.tsx:

```typescript
import { ReactNode } from 'react';
import styles from './Card.module.css';

interface CardBackProps {
  /** Custom content for card back (image, pattern, or component) */
  children?: ReactNode;
  /** Additional class name */
  className?: string;
}

export function CardBack({ children, className }: CardBackProps) {
  // Implementation...
}
```

Implementation requirements:
1. Render children if provided (custom card back)
2. If no children, render default card back pattern
3. Default pattern: navy blue gradient with subtle diagonal lines (from CSS)
4. Apply backface-visibility: hidden and pre-rotate 180deg (handled by CSS)

The default card back should be visually appealing but simple - material design aesthetic per CONTEXT.md.
  </action>
  <verify>
- CardBack with no children shows default pattern
- CardBack with custom children renders that content
- Default pattern is visually appealing navy blue design
  </verify>
  <done>
- CardBack supports customization via children prop
- Default pattern provides professional card back design
- Component applies correct CSS for 3D flip
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Component structure exists:
   ```
   src/components/Card/
     Card.types.ts
     Card.module.css
     CardFace.tsx
     CardBack.tsx
   ```

2. TypeScript compiles: `npx tsc --noEmit`

3. Components render correctly (can verify in temporary test):
   - CardFace shows correct suit/rank for all cards
   - CardBack shows default or custom design
   - Colors match selected scheme
</verification>

<success_criteria>
- CardFace displays all 52 cards with correct suit emoji and rank
- CardBack supports customization while providing attractive default
- Material design shadows and flat styling applied
- Aspect ratios correctly implemented for poker and bridge sizes
- CSS scales properly with container size
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation---core-rendering/01-03-SUMMARY.md`
</output>
