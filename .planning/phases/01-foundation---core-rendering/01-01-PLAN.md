---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - vite.config.ts
  - src/types/card.ts
  - src/types/index.ts
  - src/constants/suits.ts
  - src/constants/animations.ts
  - src/constants/index.ts
autonomous: true

must_haves:
  truths:
    - "npm install succeeds without errors"
    - "TypeScript compilation passes"
    - "Suit and Rank types are exported and usable"
    - "Card notation parser correctly identifies all 52 cards"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "motion"
    - path: "tsconfig.json"
      provides: "TypeScript configuration"
      contains: "strict"
    - path: "vite.config.ts"
      provides: "Build configuration for library mode"
      contains: "lib"
    - path: "src/types/card.ts"
      provides: "Card, Suit, Rank type definitions"
      exports: ["Suit", "Rank", "CardData", "parseCard"]
    - path: "src/constants/suits.ts"
      provides: "Suit emoji mappings and color schemes"
      exports: ["SUIT_EMOJI", "SUIT_COLORS_TWO", "SUIT_COLORS_FOUR"]
  key_links:
    - from: "src/types/card.ts"
      to: "src/constants/suits.ts"
      via: "Suit type used in SUIT_EMOJI Record"
      pattern: "Record<Suit"
---

<objective>
Initialize the React component library project with TypeScript types for playing cards.

Purpose: Establish the foundation (build tooling, types, constants) that all subsequent plans depend on. Without this, no other work can proceed.

Output:
- Working npm project with React, TypeScript, Motion, and Vitest
- Complete type system for 52-card deck (Suit, Rank, CardData)
- Utility constants for suit emojis and color schemes
- Card notation parser for "♠A" format strings
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-foundation---core-rendering/01-CONTEXT.md
@.planning/phases/01-foundation---core-rendering/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize npm project with dependencies</name>
  <files>package.json, tsconfig.json, vite.config.ts</files>
  <action>
Create the project structure:

1. Initialize package.json with:
   - name: "@decentralized-games/card-components"
   - type: "module"
   - React 18/19 as peer dependency
   - motion ^12.27 as dependency
   - TypeScript ^5.8, Vitest ^4.0, @testing-library/react ^16.2, jsdom as devDependencies
   - Scripts: "dev", "build", "test", "lint", "typecheck"
   - Vite library mode exports configuration

2. Create tsconfig.json with:
   - strict: true
   - target: ES2020
   - module: ESNext, moduleResolution: bundler
   - jsx: react-jsx
   - Include src/**/*

3. Create vite.config.ts with:
   - Library mode (lib entry: src/index.ts)
   - React plugin
   - CSS modules support
   - External: react, react-dom, motion

Run `npm install` to verify dependencies resolve.

IMPORTANT: Use peer dependencies for React to avoid version conflicts in consuming apps.
  </action>
  <verify>
Run these commands and verify success:
- `npm install` completes without errors
- `npx tsc --noEmit` passes (after src files exist)
  </verify>
  <done>
- package.json has all specified dependencies
- tsconfig.json enables strict TypeScript
- vite.config.ts configures library build mode
- npm install completes successfully
  </done>
</task>

<task type="auto">
  <name>Task 2: Create TypeScript types for playing cards</name>
  <files>src/types/card.ts, src/types/index.ts</files>
  <action>
Create the card type system in src/types/card.ts:

1. Define Suit type as literal union using const assertion:
   ```typescript
   export const SUITS = ['spades', 'hearts', 'diamonds', 'clubs'] as const;
   export type Suit = typeof SUITS[number];
   ```

2. Define Rank type (2-10, T for 10, J, Q, K, A):
   ```typescript
   export const RANKS = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A'] as const;
   export type Rank = typeof RANKS[number];
   ```

3. Define CardData interface:
   ```typescript
   export interface CardData {
     suit: Suit;
     rank: Rank;
   }
   ```

4. Create parseCard function that converts notation (e.g., "♠A", "♥7") to CardData:
   - Extract first character as emoji suit
   - Extract remaining characters as rank
   - Return null for invalid notation
   - Handle both emoji and text notation

5. Create formatCard function that converts CardData back to notation

6. Create barrel export in src/types/index.ts

IMPORTANT: Use discriminated unions pattern from RESEARCH.md. Types must work with strict TypeScript.
  </action>
  <verify>
Create a simple test in the same commit:
- parseCard("♠A") returns { suit: 'spades', rank: 'A' }
- parseCard("♥7") returns { suit: 'hearts', rank: '7' }
- parseCard("invalid") returns null
- formatCard({ suit: 'spades', rank: 'A' }) returns "♠A"
- All 52 card combinations parse correctly
  </verify>
  <done>
- Suit and Rank are exported literal union types
- CardData interface is exported
- parseCard handles all 52 cards plus invalid input
- formatCard is inverse of parseCard
- Types compile without errors under strict mode
  </done>
</task>

<task type="auto">
  <name>Task 3: Create suit constants and color schemes</name>
  <files>src/constants/suits.ts, src/constants/animations.ts, src/constants/index.ts</files>
  <action>
Create constants in src/constants/suits.ts:

1. SUIT_EMOJI mapping:
   ```typescript
   export const SUIT_EMOJI: Record<Suit, string> = {
     spades: '♠',
     hearts: '♥',
     diamonds: '♦',
     clubs: '♣',
   };
   ```

2. Two-color scheme (traditional):
   ```typescript
   export const SUIT_COLORS_TWO: Record<Suit, string> = {
     spades: '#000000',
     hearts: '#cc0000',
     diamonds: '#cc0000',
     clubs: '#000000',
   };
   ```

3. Four-color scheme (from CONTEXT.md decision):
   ```typescript
   export const SUIT_COLORS_FOUR: Record<Suit, string> = {
     spades: '#000000',   // black
     hearts: '#cc0000',   // red
     diamonds: '#0066cc', // blue
     clubs: '#009933',    // green
   };
   ```

4. Create animation constants in src/constants/animations.ts:
   ```typescript
   export const SPRING_PRESETS = {
     default: { stiffness: 100, damping: 15 },
     bouncy: { stiffness: 100, damping: 10 },
     stiff: { stiffness: 200, damping: 20 },
   };

   export const PERSPECTIVE_VALUES = {
     subtle: '2000px',
     moderate: '1000px',
     dramatic: '600px',
   };

   export const ASPECT_RATIOS = {
     poker: 5 / 7,      // 2.5:3.5
     bridge: 9 / 14,    // 2.25:3.5
   };
   ```

5. Create barrel export in src/constants/index.ts

IMPORTANT: Import Suit type from ../types to ensure type safety.
  </action>
  <verify>
- TypeScript compiles without errors
- SUIT_EMOJI['spades'] === '♠'
- SUIT_COLORS_TWO['hearts'] === '#cc0000'
- SUIT_COLORS_FOUR['diamonds'] === '#0066cc'
- SPRING_PRESETS and PERSPECTIVE_VALUES are exported
  </verify>
  <done>
- All suit emoji mappings are correct
- Two-color scheme matches traditional playing cards
- Four-color scheme matches CONTEXT.md decisions
- Animation presets provide spring configurations
- Perspective and aspect ratio values are exported
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Project structure exists:
   ```
   src/
     types/
       card.ts
       index.ts
     constants/
       suits.ts
       animations.ts
       index.ts
   package.json
   tsconfig.json
   vite.config.ts
   ```

2. `npm install` succeeds
3. `npx tsc --noEmit` passes
4. Imports work: `import { Suit, Rank, parseCard } from './types'`
5. Imports work: `import { SUIT_EMOJI, SPRING_PRESETS } from './constants'`
</verification>

<success_criteria>
- Zero TypeScript errors with strict mode
- All 52 cards can be represented with CardData type
- parseCard correctly parses any valid card notation
- Color schemes support both two-color and four-color variants
- Project is ready for component development in subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation---core-rendering/01-01-SUMMARY.md`
</output>
